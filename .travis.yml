language: ruby
sudo: required
cache: bundler
services: docker
before_script: mkdir debs && chmod 777 debs
env:
    - TRAVIS_ARCH=aarch64
    - TRAVIS_ARCH=arm
    - TRAVIS_ARCH=i686
    - TRAVIS_ARCH=x86_64
script: bundle exec rake build["${ARGS}"]
jobs:
  include:
    - stage: Build aarch64
      env: ARGS="-a aarch64"
    - env: ARGS="-i -a aarch64"
    - stage: Build arm, i686, & x86_64
      env: ARGS="-a arm"
    - env: ARGS="-a i686"
    - env: ARGS="-a x86_64"
    - env: ARGS="-i -a arm"
    - env: ARGS="-i -a i686"
    - env: ARGS="-i -a x86_64"
